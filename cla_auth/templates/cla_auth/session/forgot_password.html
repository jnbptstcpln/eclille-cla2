{% extends "layout/standalone.html" %}

{% block page_title %}CLA - J'ai oublié...{% endblock %}

{% block content_align %}align-items-center{% endblock %}

{% block content %}
    <div style="max-width: 650px" class="card w-100">
        <div class="card-body">
            <div class="mt-4 mt-md-0">
                {% if error %}
                    <h1 class="text-x1 text-lg-x2 text-center"><span style="font-size: 140%">Une erreur est survenue</span></h1>
                    <div class="alert alert-danger mt-3">
                        {{ error|default_if_none:"Une erreur est survenu lors du traitement de votre requête." }}
                    </div>
                {% elif warning %}
                    <h1 class="text-x1 text-lg-x2 text-center"><span style="font-size: 130%">Réinitialiser mon mot de passe</span></h1>
                    <div class="alert alert-warning mt-3">
                        Un email contenant un lien de réinitialisation vous a déjà été envoyé.<br>
                        Si vous ne l'avez pas reçu, <a href="mailto:cla@centralelille.fr">Contactez-nous</a>
                    </div>
                {% elif success %}
                    <h1 class="text-x1 text-lg-x2 text-center"><span style="font-size: 130%">Réinitialiser mon mot de passe</span></h1>
                    <div class="alert alert-success mt-3">
                        Un lien de réinitialisation vient de vous être envoyé à l'adresse que vous avez indiquée.<br>
                        Pensez à vérifier vos spams si vous ne le trouvez toujours pas d'ici quelques minutes.
                    </div>
                {% else %}
                    <h1 class="text-x1 text-lg-x2 text-center"><span style="font-size: 130%">J'ai oublié mon mot de passe</span></h1>
                    <form method="post" action="{% url "cla_auth:forgot_username" %}" class="mt-3">
                        {% csrf_token %}
                        <p class="mb-2 text-justify">
                            Indiquer votre adresse mail personnelle (PAS celle en @xxx.centralelille.fr) qui a été utilisée
                            pour créer votre compte.<br class="d-inline d-sm-none"> Vous êtes bloqués ? <a href="mailto:cla@centralelille.fr">Contactez-nous</a>
                        </p>
                        </p>
                        {% include "components/form-group.html" with field=form.email %}
                        <p class="text-center mt-2">
                            <button type="submit" class="btn btn-primary btn-lg">Rechercher</button>
                        </p>
                    </form>
                    <p class="small mt-4 text-center">
                        <a href="{% url "cla_auth:forgot" %}" class="text-reset">Retour</a>
                    </p>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}